//
//  RegionNode.swift
//  SceneCraft
//
//  Created by Martin Mumford on 7/7/15.
//  Copyright (c) 2015 Brigham Young University. All rights reserved.
//

import Foundation

class RegionNode
{
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Variables
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    // Identification
    var label:Int
    
    // Structure
    var region:Region
    
    // Hierarchical Relationships
    var parent:RegionNode?
    var children:[RegionNode]
    
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    
    
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Initialization
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    convenience init(label:Int)
    {
        self.init(label:label, parent:nil)
    }
    
    init(label:Int, parent:RegionNode?)
    {
        self.label = label
        
        // Create an empty region
        self.region = Region()
        
        self.parent = parent
        self.children = [RegionNode]()
    }
    
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    
    
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Structure
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    func addCoord(coord:DiscreteCoord)
    {
        region.addCoord(coord)
    }
    
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    
    
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Hierarchical Relationship
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    func addChild(child:RegionNode)
    {
        child.parent = self
        children.append(child)
    }
    
    func descendantWithLabel(label:Int) -> RegionNode?
    {
        if (self.label == label)
        {
            return self
        }
        else
        {
            for child in children
            {
                if let descendant = child.descendantWithLabel(label)
                {
                    return descendant
                }
            }
        }
        
        return nil
    }
}